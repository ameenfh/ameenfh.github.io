<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title></title>
    <link rel ="stylesheet" href = "style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Abril+Fatface&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Major+Mono+Display&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lato&family=Major+Mono+Display&display=swap" rel="stylesheet">
    <script src="https://d3js.org/d3.v5.min.js"></script>
    <script src="script.js"></script>
    <meta name = "viewport" content = "width = device-width, initial-scale = 1.0">
</head>
<body>

    <h1 id = "mainTitle" class = "section1">
        Which is Better For Your Wallet:
    </h1>
    <h1 id = "mainTitle2" class = "section1">Produce?</h1>
        
    <script>
    // Select the h1 tag
      const h1Element = document.getElementById("mainTitle2");

      // Initial sentences
      const sentences = ["Produce?", "Snacks?"];
      let currentIndex = 0;

      // Function to update text
      
      function updateText() {
        h1Element.textContent = sentences[currentIndex];

        // Toggle between sentences
        currentIndex = (currentIndex + 1) % sentences.length;
      }

      // Set interval to update text every 2000 milliseconds (2 seconds)
      setInterval(updateText, 1000);


    </script>

    <p id = "intro">
        As he entered Walmart, he was greeted by the cool AC through the sliding doors. Charles "Chip" Plum was on a mission. His stomach grumbled as he remembered only having $5 in his wallet. <b> But what would fill his stomach for the best price: junk food or something healthy, like fruits and vegetables?</b>  I analyzed USDA data for snack prices and produce prices for 2023 to answer this question. <br> <br> Mr. Plum raced through the produce section, scanning through the prices. Then, he dash to the snack aisle. His eyes widened and his jaw dropped as he left Walmart with a bag filled with food. What did Mr. Plum find?
    </p>




    <h2 id = "s2Title"class = "section2">
        My Data
    </h2>
    <p id = "dataText" class = "section2">
        I consider the three datasets that I found reliable and comprehensive. They are reliable because they come from the <a href = https://www.ers.usda.gov/data-products/fruit-and-vegetable-prices/> US Department of Agriculture’s Economic research </a>on the prices of fruits, vegetables, and snack foods. This data is comprehensive because it contains information about different types of fruits, vegetables, and snacks and their different forms (e.g. the dataset on fruit talks about the costs of apple sauce, apples in fruit form, and apple juice). Additionally, the fruit and vegetable datasets are up-to-date, last updated in 5/24/23.
    </p>
    
    <table id = "section3">
        <tr>
            <th colspan = "2"> Fruit and Vegetable Data </th>
        </tr>
        <tr>
        <td class = "analysisText"> 
            Mr. Plum smelled the refreshing scents of the fruits and vegetables as he went through the price tags. The prices orchestrated into a melody: the prices per pound of the produce clustered around lower prices, usually between $0.50 and $1.5 per pound. The central price was about $1.9 per pound. The prices varied from $0.2 to $4.75 per pound, but Mr. Plum’s eyebrow twitched as he noticed an unusual note in his mental symphony. Some costed greater than $5.5 per pound, and he would avoid purchasing them: <i> asparagus ($6.71/pound), figs ($6.84/pound), fresh raspberries ($6.64/pound), and mangoes ($10.56/pound). </i> Others were very cheap, and he would definitely buy them: <i> bananas ($0.53/pound), watermelon ($0.37/pound), carrots ($0.88/pound), and cabbage ($0.71/pound). </i>
        </td>
        <td>
            <div id="histogram-container"></div>
        </td>
        </tr>
    </table>
    
    <table id = "section4">
        <tr>
            <th colspan = "2"> Snack Data </th>
        </tr>
        <tr>
          <td> <div id="histogram-container2"></div> </td>
           <td class = "analysisText">
                Mr. Plum entered the snack aisle and continued his mission. Sure, produce was better for his health, but it wouldn't hurt to add some flavor to his life with tasty snacks. Like Sherlock Holmes, he deciphered the price tags and found a pattern: the prices were symmetrical and clustered around the prices between $3.5 to $4.5. The middle price for snacks was $3.75 per pound, and the prices varied from $2 to $5.75 per pound. However, again, there were some great and terrible prices. He knew that he would avoid buying <i> fruit rolls ($7.56/pound), granola bars ($5.79/pound), chocolate ($5.56/pound), and potato chips ($5.10/pound). </i> On the other hand, he was considering purchasing <i> ice cream ($2.13/pound), pudding ($1.98/pound), and toaster pastries ($2.68/pound). </i>
           </td>
        <tr>
    </table>

    
   



    <h2 id = "answerTitle">
        Answer
    </h2>
    <p id = "answerText">
        It is cheaper, on average, to purchase fruits and vegetables in the US in 2023 than to purchase snack foods. Relatively more fruits and vegetables are concentrated around cheaper prices than snacks. In 2023, fruits and vegetables cost an average of $2.27 per pound. In 2023, snacks cost an average of $4.06. This means that snacks cost $1.21 more than fruits and vegetables on average. Also, most of the fruit and vegetable costs are between $1.5 and $2.5 while for snacks it is between $3.1 and $4.2.
    </p>
    

    <h2 id = "insight">
        Central Insight
    </h2>
    <p id = "insightText">
        The data consistently shows that the cost per pound of produce is generally lower than that of snack foods. In a world of financial constraints, these findings empower consumers to make more economical choices, minimizing wasteful spending. Ultimately, the key takeaway is that individuals on limited budgets wanting to maximize food quantity should prioritize purchasing fruits and vegetables over junk food. This means buying more bananas, watermelons, carrots, and green cabbage and also avoiding the purchase of chocolate, potato chips, fruit rolls, and granola bars. However, buying only produce is easier said than done. If you need to buy snacks, getting the most for your money means buying ice cream, pudding, and toaster pastries. <br> <br> Mr. Plum left with a bag containing 9 pounds of bananas. <i> I am going to be really full after lunch, </i> he thought.
    

    </p>

    <script>
    // Sample data
var fvdata = [0.9, 1, 0.93, 1, 0.65, 1, 0.64, 1, 0.96, 1, 0.95, 1, 0.51, 0.92, 0.65, 0.77, 1, 1, 0.96, 1, 0.65, 0.49, 0.96, 1, 0.46, 0.76, 0.71, 1, 0.91, 0.68, 0.62, 1, 0.96, 1, 0.65, 1, 0.9, 1, 0.65, 0.51, 1, 0.65, 1, 0.94, 1, 0.56, 0.96, 1, 0.94, 1, 0.52, 1.1804, 2.1913, 3.4119, 2.7576, 3.1269, 6.07045, 2.2368, 1.2684, 1.0281, 1.3753, 1.0375, 1.7584, 2.7486, 2.3065, 2.1543, 2.6895, 2.6214, 1.2325, 0.7025, 1.0985, 1.2823, 0.8703, 0.8703, 1.2716, 1.1315, 1.6763, 3.5859, 1.9769, 1.9946, 0.9842, 2.4041, 2.682, 1.0418, 1.9022, 1.8908, 1.0287, 1.6642, 1.1933,1.1933, 1.0095, 1.6965, 2.1463, 1.0175, 1.946, 1.2516, 1.8937, 1.2772, 2.5018, 2.1257, 0.9719, 1.7218, 1.6483, 0.9952, 1.8299, 2.5766, 1.404, 1.8995, 2.1861, 1.5339, 1.5296, 1.5978, 2.0033, 3.4464, 3.6417, 1.0496, 1.9288, 1.0492, 1.4942, 3.9803, 1.8562, 5.7719, 0.9751, 0.8742, 1.2933, 0.66822, 1.5371, 1.107, 2.0172, 1.577, 2.1614, 2.994, 2.994, 1.3154, 2.133, 1.1198, 4.1458, 1.1618, 2.3347, 1.10175, 2.4176, 1.0429, 1.9451, 1.5489   ];
var sdata = [5.555573, 3.606123, 4.571, 3.776, 3.586, 3.861, 3.696, 7.556, 3.420, 5.797, 2.128, 5.335, 3.751, 5.097, 3.437, 1.972, 3.204, 2.679, 3.925]

//Fruit and Vegetable Histogram
// Set up the SVG container
var svgWidth = 500;
var svgHeight = 500;
var margin = { top: 20, right: 30, bottom: 40, left: 40 };

var width = svgWidth - margin.left - margin.right;
var height = svgHeight - margin.top - margin.bottom;

var svg = d3
  .select("#histogram-container")
  .append("svg")
  .attr("width", svgWidth)
  .attr("height", svgHeight)
  .append("g")
  .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

// Create a histogram function for fv
var histogram = d3.histogram()
  .domain(d3.extent(fvdata))
  .thresholds(d3.range(0.5, 6)); // You can adjust the range and number of bins

// Use the histogram function to calculate the bins
var bins = histogram(fvdata);

// Create the x and y scales
var x = d3.scaleLinear().domain([0, 8]).range([0, width]);
var y = d3.scaleLinear().domain([0, d3.max(bins, d => d.length)]).range([height, 0]);

// Create and append the bars
svg.selectAll("rect")
  .data(bins)
  .enter()
  .append("rect")
  .attr("x", d => x(d.x0))
  .attr("y", d => y(d.length))
  .attr("width", d => x(d.x1) - x(d.x0) - 1)
  .attr("height", d => height - y(d.length))
  .style("fill", "#b99ae3")
  //Histogram interaction
  .on("mouseover", function (event, d) {
    d3.select(this).style("fill", "#e3c39a"); // Change color on hover
  })
  .on("mouseout", function () {
    d3.select(this).style("fill", "#b99ae3"); // Revert to original color on mouseout
  });

// Add x-axis
svg.append("g")
  .attr("transform", "translate(0," + height + ")")
  .call(d3.axisBottom(x))
  .append("text")
  .attr("x", width / 2)
  .attr("y", margin.bottom - 10)
  .attr("text-anchor", "middle");

// Add y-axis
svg.append("g")
  .call(d3.axisLeft(y))
  .append("text")
  .attr("transform", "rotate(-90)")
  .attr("y", -margin.left + 10)
  .attr("x", -height / 2)
  .attr("dy", "0.71em")
  .attr("text-anchor", "middle");

  //Axis labels
  svg
        .append("text")
        .attr("class", "x label")
        .attr("text-anchor", "end")
        .attr("x", width) // Adjust this position as needed
        .attr("y", height + margin.top + 20) // Adjust this position as needed
        .style("font-family", "Verdana, sans-serif")
        .style("font-size", "14px")
        .style("fill", "white")
        .text("Price Per Pound ($ in 2023)");

      // Add Y-axis label
      svg
        .append("text")
        .attr("class", "y label")
        .attr("text-anchor", "end")
        .attr("y", -40) // Adjust this position as needed
        .attr("dy", ".75em")
        .attr("transform", "rotate(-90)")
        .style("font-family", "Verdana, sans-serif")
        .style("font-size", "14px")
        .style("fill", "white")
        .text("Frequency");






  //snack histogram
  // Set up the SVG container
var svgWidth = 500;
var svgHeight = 500;
var margin = { top: 20, right: 30, bottom: 40, left: 40 };

var width = svgWidth - margin.left - margin.right;
var height = svgHeight - margin.top - margin.bottom;

var svg = d3
  .select("#histogram-container2")
  .append("svg")
  .attr("width", svgWidth)
  .attr("height", svgHeight)
  .append("g")
  .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

// Create a histogram function for fv
var histogram = d3.histogram()
  .domain(d3.extent(fvdata))
  .thresholds(d3.range(0.5, 6)); // You can adjust the range and number of bins

// Use the histogram function to calculate the bins
var bins = histogram(sdata);

// Create the x and y scales
var x = d3.scaleLinear().domain([0, 8]).range([0, width]);
var y = d3.scaleLinear().domain([0, d3.max(bins, d => d.length)]).range([height, 0]);

// Create and append the bars
svg.selectAll("rect")
  .data(bins)
  .enter()
  .append("rect")
  .attr("x", d => x(d.x0))
  .attr("y", d => y(d.length))
  .attr("width", d => x(d.x1) - x(d.x0) - 1)
  .attr("height", d => height - y(d.length))
  .style("fill", "#b99ae3")
  //Histogram interaction
  .on("mouseover", function (event, d) {
    d3.select(this).style("fill", "#e3c39a"); // Change color on hover
    var count = d.length
    
  })
  .on("mouseout", function () {
    d3.select(this).style("fill", "#b99ae3"); // Revert to original color on mouseout
  });


// Add x-axis
svg.append("g")
  .attr("transform", "translate(0," + height + ")")
  .call(d3.axisBottom(x))
  .append("text")
  .attr("x", width / 2)
  .attr("y", margin.bottom - 10)
  .attr("text-anchor", "middle");

// Add y-axis
svg.append("g")
  .call(d3.axisLeft(y))
  .append("text")
  .attr("transform", "rotate(-90)")
  .attr("y", -margin.left + 10)
  .attr("x", -height / 2)
  .attr("dy", "0.71em")
  .attr("text-anchor", "middle");

  //Axis labels
  svg
        .append("text")
        .attr("class", "x label")
        .attr("text-anchor", "end")
        .attr("x", width) // Adjust this position as needed
        .attr("y", height + margin.top + 20) // Adjust this position as needed
        .style("font-family", "Verdana, sans-serif")
        .style("font-size", "14px")
        .style("fill", "white")
        .text("Price Per Pound ($ in 2023)");

      // Add Y-axis label
      svg
        .append("text")
        .attr("class", "y label")
        .attr("text-anchor", "end")
        .attr("y", -40) // Adjust this position as needed
        .attr("dy", ".75em")
        .attr("transform", "rotate(-90)")
        .style("font-family", "Verdana, sans-serif")
        .style("font-size", "14px")
        .style("fill", "white")
        .text("Frequency");




//JS fade in and fade out of sections
document.addEventListener("DOMContentLoaded", function () {
    var section1a = document.getElementById("mainTitle");
    var section1b = document.getElementById("mainTitle2");
    var intro = document.getElementById("intro");
    var section2a = document.getElementById("s2Title");
    var section2b = document.getElementById("dataText");
    var section3 = document.getElementById("section3");
    var section4 = document.getElementById("section4");
    var section5a = document.getElementById("answerTitle");
    var section5b = document.getElementById("answerText");
    var section6a = document.getElementById("insight");
    var section6b = document.getElementById("insightText");
   

    window.addEventListener("scroll", function () {
        // Check if the scroll position is beyond the threshold
        if (window.scrollY < 700) {
            var opacity = 1 - window.scrollY / 700; // Adjust the threshold as needed

            // Ensure the opacity stays within the range [0, 1]
            opacity = Math.max(0, Math.min(1, opacity));

            // Set the opacity of the text element
            section1a.style.opacity = opacity.toFixed(2);
            section1b.style.opacity = opacity.toFixed(2);
            intro.style.opacity = 1 - opacity.toFixed(2);
        
        }
        
        else if (window.scrollY >= 700 && window.scrollY < 800) {
            var opacity = window.scrollY / 600; // Adjust the threshold as needed

        // Ensure the opacity stays within the range [0, 1]
        opacity = Math.max(0, Math.min(1, opacity));

        // Set the opacity of the text element
        intro.style.opacity = opacity.toFixed(2);
        }
        else if (window.scrollY >= 800 && window.scrollY < 1000) {
        var opacity = 1- window.scrollY / 800; // Adjust the threshold as needed

        // Ensure the opacity stays within the range [0, 1]
        opacity = Math.max(0, Math.min(1, opacity));

        // Set the opacity of the text element
        intro.style.opacity = opacity.toFixed(2);
        intro.style.opacity =  opacity.toFixed(2);
        section2a.style.opacity = opacity.toFixed(2);
        section2b.style.opacity = opacity.toFixed(2);
        }



        
        else if (window.scrollY >= 1000 && window.scrollY < 1400) {
            var opacity = window.scrollY / 1000; // Adjust the threshold as needed

        // Ensure the opacity stays within the range [0, 1]
        opacity = Math.max(0, Math.min(1, opacity));

        // Set the opacity of the text element
        section2a.style.opacity = opacity.toFixed(2);
        section2b.style.opacity = opacity.toFixed(2);
        }
        else if (window.scrollY >= 1400 && window.scrollY < 1600) {
        var opacity = 1- window.scrollY / 1400; // Adjust the threshold as needed

        // Ensure the opacity stays within the range [0, 1]
        opacity = Math.max(0, Math.min(1, opacity));

        // Set the opacity of the text element
        section2a.style.opacity = opacity.toFixed(2);
        section2b.style.opacity = opacity.toFixed(2);
        section3.style.opacity =  opacity.toFixed(2);
        }
        
        
        else if (window.scrollY >= 1600 && window.scrollY < 1800) {
            var opacity = window.scrollY / 1600; // Adjust the threshold as needed

        // Ensure the opacity stays within the range [0, 1]
        opacity = Math.max(0, Math.min(1, opacity));

        // Set the opacity of the text element
        section3.style.opacity = opacity.toFixed(2);
        }
        else if (window.scrollY >= 1800 && window.scrollY < 2100) {
        var opacity = 1- window.scrollY / 1800; // Adjust the threshold as needed

        // Ensure the opacity stays within the range [0, 1]
        opacity = Math.max(0, Math.min(1, opacity));

        // Set the opacity of the text element
        section3.style.opacity = opacity.toFixed(2);
        section4.style.opacity = opacity.toFixed(2);
        }

        
        else if (window.scrollY >= 2100 && window.scrollY < 2500) {
            var opacity = window.scrollY / 2100; // Adjust the threshold as needed

        // Ensure the opacity stays within the range [0, 1]
        opacity = Math.max(0, Math.min(1, opacity));

        // Set the opacity of the text element
        section4.style.opacity = opacity.toFixed(2);
        }
        else if (window.scrollY >= 2500 && window.scrollY < 2800) {
        var opacity = 1- window.scrollY / 2500; // Adjust the threshold as needed

        // Ensure the opacity stays within the range [0, 1]
        opacity = Math.max(0, Math.min(1, opacity));

        // Set the opacity of the text element
        section4.style.opacity = opacity.toFixed(2);
        section5a.style.opacity = opacity.toFixed(2);
        section5b.style.opacity = opacity.toFixed(2);
        }


        else if (window.scrollY >= 3000 && window.scrollY < 3300) {
            var opacity = window.scrollY / 3000; // Adjust the threshold as needed

        // Ensure the opacity stays within the range [0, 1]
        opacity = Math.max(0, Math.min(1, opacity));

        // Set the opacity of the text element
        section5a.style.opacity = opacity.toFixed(2);
        section5b.style.opacity = opacity.toFixed(2);
        }
        else if (window.scrollY >= 3300 && window.scrollY < 3500) {
            var opacity = 1 - window.scrollY / 3300; // Adjust the threshold as needed

        // Ensure the opacity stays within the range [0, 1]
        opacity = Math.max(0, Math.min(1, opacity));

        // Set the opacity of the text element
        section5a.style.opacity = opacity.toFixed(2);
        section5b.style.opacity = opacity.toFixed(2);
        section6a.style.opacity = opacity.toFixed(2);
        section6b.style.opacity = opacity.toFixed(2);
        }

        else if (window.scrollY >= 3500 && window.scrollY < 3700) {
            var opacity = window.scrollY / 3500; // Adjust the threshold as needed

        // Ensure the opacity stays within the range [0, 1]
        opacity = Math.max(0, Math.min(1, opacity));

        // Set the opacity of the text element
        section6a.style.opacity = opacity.toFixed(2);
        section6b.style.opacity = opacity.toFixed(2);
        }






    });
});

    </script>
</body>
</html>